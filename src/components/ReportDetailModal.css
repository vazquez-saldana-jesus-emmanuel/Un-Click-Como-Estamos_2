/* src/components/ReportDetailModal.css */

/* --- OVERLAY OSCURO --- */
.modal-overlay {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(0, 0, 0, 0.6) !important;
  backdrop-filter: blur(4px);
  z-index: 9999;
  display: flex; justify-content: center; align-items: center; padding: 20px;
  animation: fadeIn 0.2s ease-out;
}

/* --- CONTENEDOR PRINCIPAL (La caja blanca) --- */
.modal-detail {
  background-color: #FFFFFF !important;
  background-image: none !important;
  width: 100%; max-width: 1000px; 
  height: 85vh; /* Altura fija importante para el scroll */
  border-radius: 16px; 
  overflow: hidden; /* Corta todo lo que se salga */
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  display: flex; flex-direction: column;
  position: relative;
}

/* Botón cerrar flotante */
.btn-close-modal {
  position: absolute; top: 15px; right: 15px;
  background: white; width: 32px; height: 32px; border-radius: 50%;
  border: 1px solid #e2e8f0; display: flex; justify-content: center; align-items: center;
  cursor: pointer; z-index: 50; color: #1e293b;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.modal-content-grid {
  display: grid; 
  grid-template-columns: 55% 45%; 
  width: 100%; height: 100%;
}

/* ================= LADO IZQUIERDO (VISUAL) ================= */
.detail-visual {
  background-color: #FFFFFF !important;
  display: flex; flex-direction: column; 
  height: 100%; 
  overflow: hidden; /* Evita que crezca */
  border-right: 1px solid #f1f5f9;
}

/* --- FIX DE IMAGEN GIGANTE --- */
.image-wrapper {
  width: 100%;
  height: 50%; /* Ocupa exactamente la mitad de la altura */
  background: #000;
  position: relative;
}

.detail-img {
  width: 100%; height: 100%; 
  object-fit: cover; /* Recorta la imagen para llenar sin deformar */
  display: block;
}

/* Bloque de información scrollable */
.detail-info-block {
  flex: 1; /* Ocupa el resto del espacio */
  padding: 24px;
  overflow-y: auto; /* Scroll si el texto es muy largo */
  background-color: #FFFFFF !important;
}

.detail-info-block h2 { font-size: 1.5rem; font-weight: 800; margin: 5px 0 15px 0; color: #1e293b; }

.description-box {
  background: #f8fafc; padding: 15px; border-radius: 12px; border: 1px solid #e2e8f0; margin-top: 20px;
}
.description-box label { font-size: 11px; font-weight: 700; color: #94a3b8; display: block; margin-bottom: 5px; }
.description-box p { font-size: 14px; line-height: 1.5; color: #334155; margin: 0; }

/* Botones */
.action-buttons { display: flex; gap: 8px; flex-wrap: wrap; }
.btn-process, .btn-finalizar, .btn-rechazar { border: none; padding: 8px 16px; border-radius: 8px; font-weight: 600; font-size: 13px; display: flex; align-items: center; justify-content: center; gap: 6px; cursor: pointer; flex: 1; transition: 0.2s; }
.btn-process { background: #eff6ff; color: #1d4ed8; border: 1px solid #bfdbfe; }
.btn-process:hover { background: #dbeafe; }
.btn-finalizar { background: #f0fdf4; color: #15803d; border: 1px solid #bbf7d0; }
.btn-finalizar:hover { background: #dcfce7; }
.btn-rechazar { background: #fef2f2; color: #b91c1c; border: 1px solid #fecaca; }
.btn-rechazar:hover { background: #fee2e2; }

/* ================= LADO DERECHO (TRACKING) ================= */
.detail-tracking {
  background-color: #FFFFFF !important;
  display: flex; flex-direction: column; 
  height: 100%; 
  overflow: hidden; /* Clave para el scroll interno */
}

.metadata-section {
  padding: 20px; border-bottom: 1px solid #f1f5f9;
  display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
}
.meta-item label { font-size: 11px; color: #94a3b8; font-weight: 700; text-transform: uppercase; display: block; margin-bottom: 2px;}
.meta-item p { margin: 0; font-size: 13px; color: #1e293b; font-weight: 600; }

.tracking-header { padding: 12px 20px; background: #f8fafc; border-bottom: 1px solid #f1f5f9; display: flex; align-items: center; gap: 8px; }
.tracking-header h3 { margin: 0; font-size: 14px; color: #475569; font-weight: 600; }

/* --- AREA DE CHAT (SCROLLABLE) --- */
.comments-list {
  flex: 1; /* Ocupa todo el espacio sobrante */
  overflow-y: auto; /* AQUI ESTÁ EL SCROLL */
  padding: 20px;
  display: flex; flex-direction: column; gap: 15px;
  background-color: #fff;
}

.chat-system-msg { text-align: center; color: #cbd5e1; margin-bottom: 10px; }
.chat-system-msg p { font-size: 12px; margin-top: 5px; }

/* Burbujas */
.chat-bubble {
  max-width: 85%; padding: 12px 16px; border-radius: 12px; font-size: 13px; line-height: 1.4; position: relative;
}
.chat-bubble.admin {
  align-self: flex-end; background: #eff6ff; color: #1e3a8a; border-bottom-right-radius: 2px; border: 1px solid #dbeafe;
}
.chat-bubble.citizen {
  align-self: flex-start; background: #f8fafc; color: #334155; border-bottom-left-radius: 2px; border: 1px solid #e2e8f0;
}

.chat-meta { display: flex; justify-content: space-between; margin-bottom: 4px; font-size: 11px; opacity: 0.7; }
.chat-author { font-weight: 700; }

/* Input área fija abajo */
.comment-input-area {
  padding: 15px 20px; border-top: 1px solid #f1f5f9; display: flex; gap: 10px; background: white;
}
.comment-input-area input {
  flex: 1; padding: 10px 15px; border-radius: 20px; border: 1px solid #e2e8f0; background: #f8fafc; outline: none; font-size: 13px;
}
.btn-send {
  background: #3b82f6; color: white; border: none; width: 38px; height: 38px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s;
}
.btn-send:hover { background: #2563eb; }

/* Status Pills */
.status-pill { padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 800; text-transform: uppercase; display: inline-flex; }
.status-pending { background-color: #ffedd5; color: #9a3412; }
.status-process { background-color: #eff6ff; color: #1d4ed8; }
.status-done { background-color: #f0fdf4; color: #15803d; }
.status-rejected { background-color: #fef2f2; color: #b91c1c; }

/* Animations & Responsive */
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

@media (max-width: 900px) {
  .modal-content-grid { grid-template-columns: 1fr; overflow-y: auto; display: block; }
  .detail-visual { height: auto; border-right: none; border-bottom: 1px solid #f1f5f9; }
  .image-wrapper { height: 300px; }
  .detail-tracking { height: 500px; } /* Altura fija para el chat en movil */
}